// Generated by purs version 0.15.10
import * as Control_Bind from "../Control.Bind/index.js";
import * as Data_Identity from "../Data.Identity/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Effect_Aff from "../Effect.Aff/index.js";
import * as Effect_Aff_Class from "../Effect.Aff.Class/index.js";
import * as Registry_PackageName from "../Registry.PackageName/index.js";
import * as Spago_Command_Init from "../Spago.Command.Init/index.js";
import * as Spago_Core_Config from "../Spago.Core.Config/index.js";
import * as Spago_FS from "../Spago.FS/index.js";
import * as Spago_Prelude from "../Spago.Prelude/index.js";
import * as Test_Prelude from "../Test.Prelude/index.js";
import * as Test_Spec from "../Test.Spec/index.js";
var discard = /* #__PURE__ */ Control_Bind.discard(Control_Bind.discardUnit);
var it = /* #__PURE__ */ Test_Spec.it(Data_Identity.monadIdentity)(Test_Spec.exampleFunc);
var discard1 = /* #__PURE__ */ discard(Effect_Aff.bindAff);
var bind = /* #__PURE__ */ Control_Bind.bind(Effect_Aff.bindAff);
var mkdirp = /* #__PURE__ */ Spago_FS.mkdirp(Effect_Aff_Class.monadAffAff);
var writeTextFile = /* #__PURE__ */ Spago_FS.writeTextFile(Effect_Aff_Class.monadAffAff);
var spec = /* #__PURE__ */ Test_Spec.around(Data_Identity.monadIdentity)(Test_Prelude.withTempDir)(/* #__PURE__ */ Test_Spec.describe(Data_Identity.monadIdentity)("sources")(/* #__PURE__ */ discard(/* #__PURE__ */ Test_Spec.bindSpecT(Data_Identity.bindIdentity))(/* #__PURE__ */ it("contains both dependencies and project sources")(function (v) {
    return discard1(bind(v.spago([ "init" ]))(Test_Prelude.shouldBeSuccess))(function () {
        return bind(v.spago([ "sources" ]))(Test_Prelude.shouldBeSuccessOutput(v.fixture("sources-output.txt")));
    });
}))(function () {
    return it("contains subproject sources when selecting a subproject")(function (v) {
        return discard1(bind(v.spago([ "init" ]))(Test_Prelude.shouldBeSuccess))(function () {
            return discard1(mkdirp("subpackage/src"))(function () {
                return discard1(mkdirp("subpackage/test"))(function () {
                    return discard1(writeTextFile("subpackage/src/Main.purs")(Spago_Command_Init.srcMainTemplate("Subpackage.Main")))(function () {
                        return discard1(writeTextFile("subpackage/test/Main.purs")(Spago_Command_Init.testMainTemplate("Subpackage.Test.Main")))(function () {
                            return discard1(Spago_FS.writeYamlFile(Spago_Core_Config.configCodec)("subpackage/spago.yaml")(Spago_Command_Init.defaultConfig(Spago_Prelude.unsafeFromRight(Registry_PackageName.parse("subpackage")))(Data_Maybe.Nothing.value)("Subpackage.Test.Main")))(function () {
                                return bind(v.spago([ "sources", "-p", "subpackage" ]))(Test_Prelude.shouldBeSuccessOutput(v.fixture("sources-subproject-output.txt")));
                            });
                        });
                    });
                });
            });
        });
    });
})));
export {
    spec
};
